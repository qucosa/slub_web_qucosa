"use strict";(self.webpackChunkqsa=self.webpackChunkqsa||[]).push([[666],{605:function(e,t,r){r.r(t),r.d(t,{default:function(){return d}});var a=r(244);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function n(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,s(a.key),a)}}function s(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,"string");if("object"!=o(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==o(t)?t:String(t)}var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r;return t=e,r=[{key:"getNextElement",value:function(e,t){var r=e.nextElementSibling;if(!t)return r;for(;r;){if(r.matches(t))return r;r=r.nextElementSibling}}},{key:"getPreviousElement",value:function(e,t){for(var r=e.previousElementSibling;r&&!r.classList.contains(t);)r=r.previousElementSibling;return r}},{key:"toggle",value:function(e,t){var r,a;for(e=e.length?e:[e],a=0;a<e.length;a++)o(r=e[a])?(r.style.display="",o(r)&&(r.style.display=t||"block")):r.style.display="none";function o(e){return"none"===window.getComputedStyle(e,null).getPropertyValue("display")}}},{key:"parseKey",value:function(e){var t={9:"TAB",13:"ENTER",27:"ESCAPE",32:"SPACE",37:"ARROW_LEFT",38:"ARROW_UP",39:"ARROW_RIGHT",40:"ARROW_DOWN"}[e.which||e.keyCode]||String.fromCharCode(e.which).toUpperCase();return t=t.replace(/\W+/,""),e.shiftKey&&(t="SHIFT_"+t),e.ctrlKey&&(t="CTRL_"+t),e.altKey&&(t="ALT_"+t),t.replace(/_$/,"")}},{key:"isVisible",value:function(e){return!(!e.offsetParent&&0===e.offsetWidth&&0===e.offsetHeight||e.classList.contains("tippy-box"))}},{key:"findFocusableElements",value:function(e){var t=this;if(!e)return!1;var r=e.querySelectorAll("a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]"),a=Array.from(r);return a.forEach((function(e,r){t.isVisible(e)||a.splice(r,1)})),a}},{key:"focusTrap",value:function(e,t){var r=this,a=function(t){var a=r.findFocusableElements(e),o=a[0],n=a[a.length-1];t.target===n&&"TAB"===r.parseKey(t)?(t.preventDefault(),o.focus()):t.target===o&&"SHIFT_TAB"===r.parseKey(t)&&(t.preventDefault(),n.focus())};t?e.addEventListener("keydown",a,!0):e.removeEventListener("keydown",a,!0)}}],null&&n(t.prototype,null),r&&n(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function l(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,u(a.key),a)}}function u(e){var t=function(e,t){if("object"!=c(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,"string");if("object"!=c(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==c(t)?t:String(t)}var d=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.init()}var t,r;return t=e,(r=[{key:"init",value:function(){this.checkAllBookmarks(),this.removeMultiple(),this.toggleBookmarkSidebar(),this.printBookmarks(),this.addBookmarks()}},{key:"checkAllBookmarks",value:function(){var e=document.querySelector("#markAllBookmarks"),t=document.querySelectorAll(".qsa_bookmarks__sidebar-list-item__mark input"),r=document.querySelector(".qsa_bookmarks__sidebar-operations--remove button");e.addEventListener("click",(function(e){var a=e.target;t.forEach((function(e){e.checked=a.checked,a.checked?r.classList.remove("d-none"):r.classList.add("d-none")}))}))}},{key:"removeMultiple",value:function(){var e=this,t=document.querySelectorAll(".qsa_bookmarks__sidebar-list-item__mark input"),r=document.querySelector(".qsa_bookmarks__sidebar-operations--remove button");t.forEach((function(e){e.addEventListener("click",(function(e){e.stopImmediatePropagation(),document.querySelectorAll('.qsa_bookmarks__sidebar-list-item__mark input[type="checkbox"]:checked').length>=2?r.classList.remove("d-none"):r.classList.add("d-none")}))})),r.addEventListener("click",(function(a){document.querySelectorAll('.qsa_bookmarks__sidebar-list-item__mark input[type="checkbox"]:checked').forEach((function(a){var o=a.parentElement.parentElement.dataset.id;e.removeBookmark(o),0===t.length&&r.classList.add("d-none")}))}))}},{key:"toggleBookmarkSidebar",value:function(){var e=document.querySelector("#bookmarkSlider"),t=document.querySelector(".qsa_bookmarks__sidebar"),r=document.querySelector("#bookmarksClose");e.addEventListener("click",(function(){e.setAttribute("aria-expanded","true"),t.setAttribute("aria-hidden","false"),t.classList.add("qsa_bookmarks__sidebar--expanded"),i.focusTrap(t,!0),t.classList.contains("qsa_bookmarks__sidebar--expanded")&&document.addEventListener("keydown",(function(r){27===r.keyCode&&(t.classList.remove("qsa_bookmarks__sidebar--expanded"),e.setAttribute("aria-expanded","false"),t.setAttribute("aria-hidden","true"),e.focus())}))})),r.addEventListener("click",(function(){t.classList.remove("qsa_bookmarks__sidebar--expanded"),e.setAttribute("aria-expanded","false"),t.setAttribute("aria-hidden","true")}));var a=e.classList.contains("");new MutationObserver((function(t){t.forEach((function(t){if("class"===t.attributeName){var r=t.target.classList.contains("qsa_bookmarks__sidebar--expanded");a!==r&&(a=r,r||e.focus())}}))})).observe(t,{attributes:!0}),t.addEventListener("click",(function(e){e.stopPropagation()}))}},{key:"printBookmarks",value:function(){var e=document.querySelector(".qsa_bookmarks__sidebar-list"),t=document.querySelector(".qsa_bookmarks__sidebar-operations--print button"),r="Favoritenliste",a=window.location.origin+"/typo3conf/ext/slub_web_qucosa/Resources/Public/Css/qsa.min.css";t.addEventListener("click",(function(){var t=window.open("","PRINT","height=400,width=600");return t.document.write("<html><head><title>"+r+"</title>"),t.document.write("<link href=".concat(a,' rel="stylesheet"></head><body class="no-flex">')),t.document.write("<h1>"+r+"</h1>"),t.document.write(e.innerHTML),t.document.write("</body></html>"),t.document.close(),t.focus(),t.onload=function(){setTimeout((function(){t.print(),t.close()}),700)},!0}))}},{key:"addBookmarks",value:function(){var e=this,t=document.querySelectorAll('.qsa_search__wrapper button[data-id="bookmark"]'),r=document.querySelector(".qsa_bookmarks__counter");localStorage.getItem("myBookmarks")||localStorage.setItem("myBookmarks",JSON.stringify([])),r.innerHTML=JSON.parse(localStorage.getItem("myBookmarks")).length;var a=JSON.parse(localStorage.getItem("myBookmarks"));0===a.length?(document.querySelector(".qsa_bookmarks__sidebar-list-wrapper").classList.add("qsa_bookmarks__sidebar-list-wrapper--empty"),document.querySelector(".qsa_bookmarks__sidebar").classList.add("empty"),r.setAttribute("aria-label","Kein Dokument wurde hinzugefÃ¼gt")):(document.querySelector(".qsa_bookmarks__sidebar").classList.remove("empty"),r.removeAttribute("aria-label")),a.forEach((function(t){e.createBookmark(t)})),t.forEach((function(t){var a=t.getAttribute("id");JSON.parse(localStorage.getItem("myBookmarks")).filter((function(e){return e.id===a})).length>0&&(t.classList.add("active-icon"),t.closest(".qsa_search__wrapper").classList.add("qsa_search__wrapper--active")),t.addEventListener("click",(function(a){var o=a.target.getAttribute("id"),n=t.parentElement.previousElementSibling,s=n.querySelector(".qsa_search-result__item-title-link").innerHTML,i=n.querySelector(".qsa_search-result__item-title-link").getAttribute("href"),c=n.querySelectorAll(".qsa_search-result__item-footer__item"),l=JSON.parse(localStorage.getItem("myBookmarks"));if(l.filter((function(e){return e.id===o})).length>0)l.findIndex((function(e){return e.id===o}))>-1&&e.removeBookmark(o);else{var u={};u.title=s,u.meta=[],u.id=o,u.href=i,c.forEach((function(e){u.meta.push(e.innerHTML)})),l.push(u),e.createBookmark(u),localStorage.setItem("myBookmarks",JSON.stringify(l)),r.innerHTML=JSON.parse(localStorage.getItem("myBookmarks")).length}}))}))}},{key:"createBookmark",value:function(e){var t=document.querySelector(".qsa_bookmarks__sidebar-list"),r=t.dataset.iconpath,o=t.dataset.icontitle,n=t.dataset.icondesc,s=t.dataset.tippydesc,i=document.createElement("li");i.classList.add("qsa_bookmarks__sidebar-list-item"),i.dataset.id=e.id;var c=document.createElement("div");c.classList.add("qsa_bookmarks__sidebar-list-item__mark"),c.insertAdjacentHTML("beforeend",'<input id="'.concat(e.id,'-input" data-id="').concat(e.id,'" type="checkbox"/><label class="sr-only" for="').concat(e.id,'-input">Eintrag markieren</label>')),i.append(c);var l=document.createElement("div");l.classList.add("qsa_bookmarks__sidebar-list-item__data"),l.insertAdjacentHTML("beforeend",'<h2 class="h6"><a class="qsa_bookmarks__sidebar-list-item__data-link" href="'.concat(e.href,'">').concat(e.title,"</a></h2>")),i.append(l);var u=document.createElement("div");u.classList.add("qsa_bookmarks__sidebar-list-item__data-footer"),e.meta.forEach((function(e){var t=document.createElement("span");t.classList.add("qsa_bookmarks__sidebar-list__data-footer-item"),t.classList.add("btn-round"),t.innerHTML=e,u.append(t)})),l.append(u);var d=document.createElement("button");d.classList.add("qsa_bookmarks__sidebar-list-item__remove"),d.setAttribute("data-id",e.id),d.setAttribute("aria-label",s),d.setAttribute("data-tippy-content",s),d.innerHTML='<svg class="qsa_icon icon--bookmark-minus icon--base" role="img" width="20" height="20" aria-hidden="true">\n'+'<title class="sr-only">'.concat(o,"</title>\n")+'<desc class="sr-only">'.concat(n,"</desc>\n")+'<use xlink:href="'.concat(r,'icon-bookmark-minus"></use>\n')+"</svg>",i.append(d),t.append(i),this.removeBookmarkByRemoveButton(),this.checkAllBookmarks(),this.removeMultiple(),document.querySelector(".qsa_bookmarks__sidebar-list-wrapper").classList.contains("qsa_bookmarks__sidebar-list-wrapper--empty")&&(document.querySelector(".qsa_bookmarks__sidebar-list-wrapper").classList.remove("qsa_bookmarks__sidebar-list-wrapper--empty"),document.querySelector(".qsa_bookmarks__sidebar").classList.remove("empty")),(0,a.Ay)("[data-tippy-content]",{interactive:!0,allowHTML:!0})}},{key:"removeBookmark",value:function(e){var t=JSON.parse(localStorage.getItem("myBookmarks")),r=document.querySelector(".qsa_bookmarks__sidebar-list").querySelector('.qsa_bookmarks__sidebar-list-item[data-id="'.concat(e,'"]')),a=t.findIndex((function(t){return t.id===e})),o=document.querySelector(".qsa_bookmarks__counter"),n=document.querySelectorAll('.qsa_search__wrapper button[data-id="bookmark"]');t.splice(a,1),localStorage.setItem("myBookmarks",JSON.stringify(t)),o.innerHTML=JSON.parse(localStorage.getItem("myBookmarks")).length,n.forEach((function(e){var r=e.getAttribute("id");0===t.filter((function(e){return e.id===r})).length&&(e.classList.remove("active-icon"),e.closest(".qsa_search__wrapper").classList.remove("qsa_search__wrapper--active"))})),r.remove(),0!==t.length||document.querySelector(".qsa_bookmarks__sidebar-list-wrapper").classList.contains("qsa_bookmarks__sidebar-list-wrapper--empty")?document.querySelector(".qsa_bookmarks__sidebar").classList.remove("empty"):(document.querySelector(".qsa_bookmarks__sidebar-list-wrapper").classList.add("qsa_bookmarks__sidebar-list-wrapper--empty"),document.querySelector(".qsa_bookmarks__sidebar").classList.add("empty"),document.querySelector("#bookmarksClose").focus())}},{key:"removeBookmarkByRemoveButton",value:function(){var e=this;document.querySelectorAll(".qsa_bookmarks__sidebar-list-item__remove").forEach((function(t){t.addEventListener("click",(function(t){t.stopImmediatePropagation(),e.removeBookmark(t.target.dataset.id),document.querySelector(".qsa_bookmarks__sidebar").classList.contains("qsa_bookmarks__sidebar--expanded")&&document.querySelector("#bookmarksClose").focus()}))}))}}])&&l(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}())}}]);