"use strict";(self.webpackChunkqsa=self.webpackChunkqsa||[]).push([[615],{601:function(e,t,a){a.r(t),a.d(t,{default:function(){return i}});var r=a(51);function o(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,a;return t=e,a=[{key:"getNextElement",value:function(e,t){var a=e.nextElementSibling;if(!t)return a;for(;a;){if(a.matches(t))return a;a=a.nextElementSibling}}},{key:"getPreviousElement",value:function(e,t){for(var a=e.previousElementSibling;a&&!a.classList.contains(t);)a=a.previousElementSibling;return a}},{key:"toggle",value:function(e,t){var a,r;for(e=e.length?e:[e],r=0;r<e.length;r++)o(a=e[r])?(a.style.display="",o(a)&&(a.style.display=t||"block")):a.style.display="none";function o(e){return"none"===window.getComputedStyle(e,null).getPropertyValue("display")}}},{key:"parseKey",value:function(e){var t={9:"TAB",13:"ENTER",27:"ESCAPE",32:"SPACE",37:"ARROW_LEFT",38:"ARROW_UP",39:"ARROW_RIGHT",40:"ARROW_DOWN"}[e.which||e.keyCode]||String.fromCharCode(e.which).toUpperCase();return t=t.replace(/\W+/,""),e.shiftKey&&(t="SHIFT_"+t),e.ctrlKey&&(t="CTRL_"+t),e.altKey&&(t="ALT_"+t),t.replace(/_$/,"")}},{key:"isVisible",value:function(e){return!(!e.offsetParent&&0===e.offsetWidth&&0===e.offsetHeight||e.classList.contains("tippy-box"))}},{key:"findFocusableElements",value:function(e){var t=this;if(!e)return!1;var a=e.querySelectorAll("a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]"),r=Array.from(a);return r.forEach((function(e,a){t.isVisible(e)||r.splice(a,1)})),r}},{key:"focusTrap",value:function(e,t){var a=this,r=function(t){var r=a.findFocusableElements(e),o=r[0],s=r[r.length-1];t.target===s&&"TAB"===a.parseKey(t)?(t.preventDefault(),o.focus()):t.target===o&&"SHIFT_TAB"===a.parseKey(t)&&(t.preventDefault(),s.focus())};t?e.addEventListener("keydown",r,!0):e.removeEventListener("keydown",r,!0)}}],null&&o(t.prototype,null),a&&o(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();function n(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.init()}var t,a;return t=e,(a=[{key:"init",value:function(){this.checkAllBookmarks(),this.removeMultiple(),this.toggleBookmarkSidebar(),this.printBookmarks(),this.addBookmarks()}},{key:"checkAllBookmarks",value:function(){var e=document.querySelector("#markAllBookmarks"),t=document.querySelectorAll(".qsa_bookmarks__sidebar-list-item__mark input"),a=document.querySelector(".qsa_bookmarks__sidebar-operations--remove button");e.addEventListener("click",(function(e){var r=e.target;t.forEach((function(e){e.checked=r.checked,r.checked?a.classList.remove("d-none"):a.classList.add("d-none")}))}))}},{key:"removeMultiple",value:function(){var e=this,t=document.querySelectorAll(".qsa_bookmarks__sidebar-list-item__mark input"),a=document.querySelector(".qsa_bookmarks__sidebar-operations--remove button");t.forEach((function(e){e.addEventListener("click",(function(e){e.stopImmediatePropagation(),document.querySelectorAll('.qsa_bookmarks__sidebar-list-item__mark input[type="checkbox"]:checked').length>=2?a.classList.remove("d-none"):a.classList.add("d-none")}))})),a.addEventListener("click",(function(r){document.querySelectorAll('.qsa_bookmarks__sidebar-list-item__mark input[type="checkbox"]:checked').forEach((function(r){var o=r.parentElement.parentElement.dataset.id;e.removeBookmark(o),0===t.length&&a.classList.add("d-none")}))}))}},{key:"toggleBookmarkSidebar",value:function(){var e=document.querySelector("#bookmarkSlider"),t=document.querySelector(".qsa_bookmarks__sidebar"),a=document.querySelector("#bookmarksClose");e.addEventListener("click",(function(){e.setAttribute("aria-expanded","true"),t.setAttribute("aria-hidden","false"),t.classList.add("qsa_bookmarks__sidebar--expanded"),s.focusTrap(t,!0),t.classList.contains("qsa_bookmarks__sidebar--expanded")&&document.addEventListener("keydown",(function(a){27===a.keyCode&&(t.classList.remove("qsa_bookmarks__sidebar--expanded"),e.setAttribute("aria-expanded","false"),t.setAttribute("aria-hidden","true"),e.focus())}))})),a.addEventListener("click",(function(){t.classList.remove("qsa_bookmarks__sidebar--expanded"),e.setAttribute("aria-expanded","false"),t.setAttribute("aria-hidden","true")}));var r=e.classList.contains("");new MutationObserver((function(t){t.forEach((function(t){if("class"===t.attributeName){var a=t.target.classList.contains("qsa_bookmarks__sidebar--expanded");r!==a&&(r=a,a||e.focus())}}))})).observe(t,{attributes:!0}),t.addEventListener("click",(function(e){e.stopPropagation()}))}},{key:"printBookmarks",value:function(){var e=document.querySelector(".qsa_bookmarks__sidebar-list"),t=document.querySelector(".qsa_bookmarks__sidebar-operations--print button"),a="Favoritenliste",r=window.location.origin+"/typo3conf/ext/slub_web_qucosa/Resources/Public/Css/qsa.min.css";t.addEventListener("click",(function(){var t=window.open("","PRINT","height=400,width=600");return t.document.write("<html><head><title>"+a+"</title>"),t.document.write("<link href=".concat(r,' rel="stylesheet"></head><body class="no-flex">')),t.document.write("<h1>"+a+"</h1>"),t.document.write(e.innerHTML),t.document.write("</body></html>"),t.document.close(),t.focus(),t.onload=function(){setTimeout((function(){t.print(),t.close()}),700)},!0}))}},{key:"addBookmarks",value:function(){var e=this,t=document.querySelectorAll('.qsa_search__wrapper button[data-id="bookmark"]'),a=document.querySelector(".qsa_bookmarks__counter");localStorage.getItem("myBookmarks")||localStorage.setItem("myBookmarks",JSON.stringify([])),a.innerHTML=JSON.parse(localStorage.getItem("myBookmarks")).length;var r=JSON.parse(localStorage.getItem("myBookmarks"));0===r.length?(document.querySelector(".qsa_bookmarks__sidebar-list-wrapper").classList.add("qsa_bookmarks__sidebar-list-wrapper--empty"),document.querySelector(".qsa_bookmarks__sidebar").classList.add("empty"),a.setAttribute("aria-label","Kein Dokument wurde hinzugefÃ¼gt")):(document.querySelector(".qsa_bookmarks__sidebar").classList.remove("empty"),a.removeAttribute("aria-label")),r.forEach((function(t){e.createBookmark(t)})),t.forEach((function(t){var r=t.getAttribute("id");JSON.parse(localStorage.getItem("myBookmarks")).filter((function(e){return e.id===r})).length>0&&(t.classList.add("active-icon"),t.closest(".qsa_search__wrapper").classList.add("qsa_search__wrapper--active")),t.addEventListener("click",(function(r){var o=r.target.getAttribute("id"),s=t.parentElement.previousElementSibling,n=s.querySelector(".qsa_search-result__item-title-link").innerHTML,i=s.querySelector(".qsa_search-result__item-title-link").getAttribute("href"),c=s.querySelectorAll(".qsa_search-result__item-footer__item"),l=JSON.parse(localStorage.getItem("myBookmarks"));if(l.filter((function(e){return e.id===o})).length>0)l.findIndex((function(e){return e.id===o}))>-1&&e.removeBookmark(o);else{var d={};d.title=n,d.meta=[],d.id=o,d.href=i,c.forEach((function(e){d.meta.push(e.innerHTML)})),l.push(d),e.createBookmark(d),localStorage.setItem("myBookmarks",JSON.stringify(l)),a.innerHTML=JSON.parse(localStorage.getItem("myBookmarks")).length}}))}))}},{key:"createBookmark",value:function(e){var t=document.querySelector(".qsa_bookmarks__sidebar-list"),a=t.dataset.iconpath,o=t.dataset.icontitle,s=t.dataset.icondesc,n=t.dataset.tippydesc,i=document.createElement("li");i.classList.add("qsa_bookmarks__sidebar-list-item"),i.dataset.id=e.id;var c=document.createElement("div");c.classList.add("qsa_bookmarks__sidebar-list-item__mark"),c.insertAdjacentHTML("beforeend",'<input id="'.concat(e.id,'-input" data-id="').concat(e.id,'" type="checkbox"/><label class="sr-only" for="').concat(e.id,'-input">Eintrag markieren</label>')),i.append(c);var l=document.createElement("div");l.classList.add("qsa_bookmarks__sidebar-list-item__data"),l.insertAdjacentHTML("beforeend",'<h2 class="h6"><a class="qsa_bookmarks__sidebar-list-item__data-link" href="'.concat(e.href,'">').concat(e.title,"</a></h2>")),i.append(l);var d=document.createElement("div");d.classList.add("qsa_bookmarks__sidebar-list-item__data-footer"),e.meta.forEach((function(e){var t=document.createElement("span");t.classList.add("qsa_bookmarks__sidebar-list__data-footer-item"),t.classList.add("btn-round"),t.innerHTML=e,d.append(t)})),l.append(d);var u=document.createElement("button");u.classList.add("qsa_bookmarks__sidebar-list-item__remove"),u.setAttribute("data-id",e.id),u.setAttribute("aria-label",n),u.setAttribute("data-tippy-content",n),u.innerHTML='<svg class="qsa_icon icon--bookmark-minus icon--base" role="img" width="20" height="20" aria-hidden="true">\n'+'<title class="sr-only">'.concat(o,"</title>\n")+'<desc class="sr-only">'.concat(s,"</desc>\n")+'<use xlink:href="'.concat(a,'icon-bookmark-minus"></use>\n')+"</svg>",i.append(u),t.append(i),this.removeBookmarkByRemoveButton(),this.checkAllBookmarks(),this.removeMultiple(),document.querySelector(".qsa_bookmarks__sidebar-list-wrapper").classList.contains("qsa_bookmarks__sidebar-list-wrapper--empty")&&(document.querySelector(".qsa_bookmarks__sidebar-list-wrapper").classList.remove("qsa_bookmarks__sidebar-list-wrapper--empty"),document.querySelector(".qsa_bookmarks__sidebar").classList.remove("empty")),(0,r.ZP)("[data-tippy-content]",{interactive:!0,allowHTML:!0})}},{key:"removeBookmark",value:function(e){var t=JSON.parse(localStorage.getItem("myBookmarks")),a=document.querySelector(".qsa_bookmarks__sidebar-list").querySelector('.qsa_bookmarks__sidebar-list-item[data-id="'.concat(e,'"]')),r=t.findIndex((function(t){return t.id===e})),o=document.querySelector(".qsa_bookmarks__counter"),s=document.querySelectorAll('.qsa_search__wrapper button[data-id="bookmark"]');t.splice(r,1),localStorage.setItem("myBookmarks",JSON.stringify(t)),o.innerHTML=JSON.parse(localStorage.getItem("myBookmarks")).length,s.forEach((function(e){var a=e.getAttribute("id");0===t.filter((function(e){return e.id===a})).length&&(e.classList.remove("active-icon"),e.closest(".qsa_search__wrapper").classList.remove("qsa_search__wrapper--active"))})),a.remove(),0!==t.length||document.querySelector(".qsa_bookmarks__sidebar-list-wrapper").classList.contains("qsa_bookmarks__sidebar-list-wrapper--empty")?document.querySelector(".qsa_bookmarks__sidebar").classList.remove("empty"):(document.querySelector(".qsa_bookmarks__sidebar-list-wrapper").classList.add("qsa_bookmarks__sidebar-list-wrapper--empty"),document.querySelector(".qsa_bookmarks__sidebar").classList.add("empty"),document.querySelector("#bookmarksClose").focus())}},{key:"removeBookmarkByRemoveButton",value:function(){var e=this;document.querySelectorAll(".qsa_bookmarks__sidebar-list-item__remove").forEach((function(t){t.addEventListener("click",(function(t){t.stopImmediatePropagation(),e.removeBookmark(t.target.dataset.id),document.querySelector(".qsa_bookmarks__sidebar").classList.contains("qsa_bookmarks__sidebar--expanded")&&document.querySelector("#bookmarksClose").focus()}))}))}}])&&n(t.prototype,a),Object.defineProperty(t,"prototype",{writable:!1}),e}())}}]);